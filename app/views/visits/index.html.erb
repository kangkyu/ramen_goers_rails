<div class="max-w-6xl mx-auto py-10 px-5">
  <div class="mb-10">
    <h1 class="text-3xl mb-2">My Ramen Journey</h1>
    <p class="text-gray-600">Track your visits and discover your favorites</p>
  </div>

  <% if @visit_stats.empty? %>
    <div class="text-center py-16 px-5">
      <span class="text-6xl block mb-5">ğŸ‘¨â€ğŸ³</span>
      <h2 class="text-2xl mb-2">No visits yet!</h2>
      <p class="text-gray-600 mb-8">Start your ramen journey by checking in to your first restaurant.</p>
      <a href="<%= root_path %>" class="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded text-sm font-medium bg-gradient-to-br from-purple-500 to-purple-700 text-white hover:-translate-y-0.5 hover:shadow-lg transition-all">Discover Restaurants</a>
    </div>
  <% else %>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mb-10">
      <% total_visits = @visit_stats.sum { |s| s[:visit_count] } %>
      <div class="bg-white p-5 rounded-lg shadow-md flex gap-4">
        <span class="text-3xl">ğŸ“ˆ</span>
        <div>
          <p class="text-3xl font-bold mb-1"><%= total_visits %></p>
          <p class="text-gray-600 text-xs uppercase">Total Visits</p>
        </div>
      </div>

      <div class="bg-white p-5 rounded-lg shadow-md flex gap-4">
        <span class="text-3xl">ğŸ“</span>
        <div>
          <p class="text-3xl font-bold mb-1"><%= @visit_stats.length %></p>
          <p class="text-gray-600 text-xs uppercase">Restaurants Visited</p>
        </div>
      </div>

      <div class="bg-white p-5 rounded-lg shadow-md flex gap-4">
        <span class="text-3xl">ğŸ‘¨â€ğŸ³</span>
        <div>
          <p class="text-3xl font-bold mb-1"><%= @visit_stats.first[:restaurant].name %></p>
          <p class="text-gray-600 text-xs uppercase">Favorite Spot</p>
        </div>
      </div>
    </div>

    <section class="mb-10">
      <h2 class="text-2xl mb-5">Visit History</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mb-10">
        <% @visit_stats.each do |stat| %>
          <div class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
            <div class="relative h-52 overflow-hidden">
              <% if stat[:restaurant].image.present? %>
                <img src="<%= stat[:restaurant].image %>" alt="<%= stat[:restaurant].name %>" class="w-full h-full object-cover hover:scale-105 transition-transform">
              <% else %>
                <div class="w-full h-full bg-gradient-to-br from-purple-500 to-purple-700"></div>
              <% end %>
              <span class="absolute top-2.5 right-2.5 bg-white text-gray-800 py-1 px-3 rounded-full text-xs font-semibold"><%= stat[:visit_count] %> visits</span>
            </div>

            <div class="p-5">
              <h3 class="text-lg mb-2"><%= stat[:restaurant].name %></h3>

              <p class="text-gray-600 text-sm mb-2">ğŸ“ <%= stat[:restaurant].address %></p>

              <% if stat[:restaurant].cuisine.present? %>
                <span class="inline-block bg-gray-100 py-1 px-2.5 rounded text-xs mb-4"><%= stat[:restaurant].cuisine %></span>
              <% end %>

              <div class="my-4">
                <p class="text-xs text-gray-600 my-1">
                  ğŸ• Last visit: <%= time_ago_in_words(stat[:last_visit]) %> ago
                </p>
                <p class="text-xs text-gray-600 my-1">
                  ğŸ“… First visit: <%= time_ago_in_words(stat[:first_visit]) %> ago
                </p>
              </div>

              <div class="my-4">
                <span class="block text-xs font-medium mb-2">Visit frequency</span>
                <div class="w-full h-2 bg-gray-100 rounded overflow-hidden">
                  <div class="h-full bg-gradient-to-r from-purple-500 to-purple-700" style="width: <%= [((stat[:visit_count] / 10.0) * 100), 100].min %>%"></div>
                </div>
              </div>

              <a href="<%= restaurant_path(stat[:restaurant]) %>" class="inline-flex items-center justify-center px-5 py-2.5 rounded text-sm font-medium border-2 border-purple-500 text-purple-500 hover:bg-purple-500 hover:text-white transition-all">
                View Details
              </a>
            </div>
          </div>
        <% end %>
      </div>
    </section>

    <div class="text-center py-10 px-10 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg">
      <h3 class="text-xl mb-2">Ready for your next ramen adventure?</h3>
      <p class="text-gray-600 mb-5">Discover new restaurants and continue building your ramen journey.</p>
      <a href="<%= root_path %>" class="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded text-sm font-medium bg-gradient-to-br from-purple-500 to-purple-700 text-white hover:-translate-y-0.5 hover:shadow-lg transition-all">Explore Restaurants</a>
    </div>
  <% end %>
</div>
