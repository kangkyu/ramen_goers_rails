<div class="visits-container">
  <div class="visits-header">
    <h1>My Ramen Journey</h1>
    <p>Track your visits and discover your favorites</p>
  </div>

  <% if @visit_stats.empty? %>
    <div class="empty-state">
      <span class="empty-icon">üë®‚Äçüç≥</span>
      <h2>No visits yet!</h2>
      <p>Start your ramen journey by checking in to your first restaurant.</p>
      <a href="<%= root_path %>" class="btn btn-primary">Discover Restaurants</a>
    </div>
  <% else %>
    <div class="stats-overview">
      <% total_visits = @visit_stats.sum { |s| s[:visit_count] } %>
      <div class="stat-card">
        <span class="stat-icon">üìà</span>
        <div>
          <p class="stat-number"><%= total_visits %></p>
          <p class="stat-label">Total Visits</p>
        </div>
      </div>

      <div class="stat-card">
        <span class="stat-icon">üìç</span>
        <div>
          <p class="stat-number"><%= @visit_stats.length %></p>
          <p class="stat-label">Restaurants Visited</p>
        </div>
      </div>

      <div class="stat-card">
        <span class="stat-icon">üë®‚Äçüç≥</span>
        <div>
          <p class="stat-number"><%= @visit_stats.first[:restaurant].name %></p>
          <p class="stat-label">Favorite Spot</p>
        </div>
      </div>
    </div>

    <section class="visits-section">
      <h2>Visit History</h2>
      <div class="visits-grid">
        <% @visit_stats.each do |stat| %>
          <div class="visit-card">
            <div class="card-image">
              <% if stat[:restaurant].image.present? %>
                <img src="<%= stat[:restaurant].image %>" alt="<%= stat[:restaurant].name %>">
              <% else %>
                <div class="placeholder-image"></div>
              <% end %>
              <span class="visit-badge"><%= stat[:visit_count] %> visits</span>
            </div>

            <div class="card-content">
              <h3><%= stat[:restaurant].name %></h3>
              
              <p class="address">üìç <%= stat[:restaurant].address %></p>

              <% if stat[:restaurant].cuisine.present? %>
                <span class="badge"><%= stat[:restaurant].cuisine %></span>
              <% end %>

              <div class="visit-dates">
                <p class="date-item">
                  üïê Last visit: <%= time_ago_in_words(stat[:last_visit]) %> ago
                </p>
                <p class="date-item">
                  üìÖ First visit: <%= time_ago_in_words(stat[:first_visit]) %> ago
                </p>
              </div>

              <div class="frequency-bar">
                <span class="frequency-label">Visit frequency</span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: <%= [((stat[:visit_count] / 10.0) * 100), 100].min %>%"></div>
                </div>
              </div>

              <a href="<%= restaurant_path(stat[:restaurant]) %>" class="btn btn-outline">
                View Details
              </a>
            </div>
          </div>
        <% end %>
      </div>
    </section>

    <div class="cta-section">
      <h3>Ready for your next ramen adventure?</h3>
      <p>Discover new restaurants and continue building your ramen journey.</p>
      <a href="<%= root_path %>" class="btn btn-primary">Explore Restaurants</a>
    </div>
  <% end %>
</div>

<style>
  .visits-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .visits-header {
    margin-bottom: 40px;
  }

  .visits-header h1 {
    font-size: 32px;
    margin-bottom: 10px;
  }

  .visits-header p {
    color: #666;
    font-size: 16px;
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
  }

  .empty-icon {
    font-size: 64px;
    display: block;
    margin-bottom: 20px;
  }

  .empty-state h2 {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .empty-state p {
    color: #666;
    margin-bottom: 30px;
  }

  .stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    gap: 15px;
  }

  .stat-icon {
    font-size: 32px;
  }

  .stat-number {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .stat-label {
    color: #666;
    font-size: 12px;
    text-transform: uppercase;
  }

  .visits-section h2 {
    font-size: 24px;
    margin-bottom: 20px;
  }

  .visits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .visit-card {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s;
  }

  .visit-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  .card-image {
    position: relative;
    height: 200px;
    overflow: hidden;
  }

  .card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .visit-card:hover .card-image img {
    transform: scale(1.05);
  }

  .placeholder-image {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .visit-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: white;
    color: #333;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
  }

  .card-content {
    padding: 20px;
  }

  .card-content h3 {
    font-size: 18px;
    margin-bottom: 8px;
  }

  .address {
    color: #666;
    font-size: 14px;
    margin-bottom: 10px;
  }

  .badge {
    display: inline-block;
    background: #f0f0f0;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    margin-bottom: 15px;
  }

  .visit-dates {
    margin: 15px 0;
  }

  .date-item {
    font-size: 12px;
    color: #666;
    margin: 5px 0;
  }

  .frequency-bar {
    margin: 15px 0;
  }

  .frequency-label {
    display: block;
    font-size: 12px;
    font-weight: 500;
    margin-bottom: 8px;
  }

  .bar-container {
    width: 100%;
    height: 8px;
    background: #f0f0f0;
    border-radius: 4px;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  }

  .cta-section {
    text-align: center;
    padding: 40px;
    background: linear-gradient(135deg, #f8f9fa 0%, #f0f1f5 100%);
    border-radius: 8px;
  }

  .cta-section h3 {
    font-size: 20px;
    margin-bottom: 10px;
  }

  .cta-section p {
    color: #666;
    margin-bottom: 20px;
  }
</style>
