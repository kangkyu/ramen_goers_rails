<div class="rankings-container">
  <div class="rankings-header">
    <h1>üèÜ Top Ramen Rankings</h1>
    <p>Discover the most visited ramen restaurants in our community</p>
  </div>

  <% if @rankings.any? %>
    <div class="rankings-stats">
      <% total_visits = @rankings.sum { |r| r.total_visits } %>
      <% max_visitors = @rankings.max_by { |r| r.unique_visitors } %>
      <div class="stat">
        <span class="stat-icon">üìà</span>
        <p class="stat-number"><%= total_visits %></p>
        <p class="stat-label">Total Visits</p>
      </div>

      <div class="stat">
        <span class="stat-icon">üë•</span>
        <p class="stat-number"><%= max_visitors.unique_visitors %></p>
        <p class="stat-label">Top Visitors</p>
      </div>

      <div class="stat">
        <span class="stat-icon">üë®‚Äçüç≥</span>
        <p class="stat-number"><%= @rankings.first.restaurant.name %></p>
        <p class="stat-label">Current Champion</p>
      </div>
    </div>

    <% if @rankings.length >= 3 %>
      <section class="podium-section">
        <h2>üèÜ Champions Podium</h2>
        <div class="podium">
          <!-- 2nd Place -->
          <div class="podium-position second-place">
            <div class="podium-image">
              <% if @rankings[1].restaurant.image.present? %>
                <img src="<%= @rankings[1].restaurant.image %>" alt="<%= @rankings[1].restaurant.name %>">
              <% else %>
                <div class="placeholder-podium"></div>
              <% end %>
            </div>
            <div class="podium-content">
              <span class="medal">ü•à</span>
              <h3><%= @rankings[1].restaurant.name %></h3>
              <p class="cuisine"><%= @rankings[1].restaurant.cuisine %></p>
              <p class="visits"><%= @rankings[1].total_visits %> visits</p>
            </div>
          </div>

          <!-- 1st Place -->
          <div class="podium-position first-place">
            <div class="podium-image">
              <% if @rankings[0].restaurant.image.present? %>
                <img src="<%= @rankings[0].restaurant.image %>" alt="<%= @rankings[0].restaurant.name %>">
              <% else %>
                <div class="placeholder-podium"></div>
              <% end %>
            </div>
            <div class="podium-content">
              <span class="medal">üëë</span>
              <h3><%= @rankings[0].restaurant.name %></h3>
              <p class="cuisine"><%= @rankings[0].restaurant.cuisine %></p>
              <p class="visits"><%= @rankings[0].total_visits %> visits</p>
            </div>
          </div>

          <!-- 3rd Place -->
          <div class="podium-position third-place">
            <div class="podium-image">
              <% if @rankings[2].restaurant.image.present? %>
                <img src="<%= @rankings[2].restaurant.image %>" alt="<%= @rankings[2].restaurant.name %>">
              <% else %>
                <div class="placeholder-podium"></div>
              <% end %>
            </div>
            <div class="podium-content">
              <span class="medal">ü•â</span>
              <h3><%= @rankings[2].restaurant.name %></h3>
              <p class="cuisine"><%= @rankings[2].restaurant.cuisine %></p>
              <p class="visits"><%= @rankings[2].total_visits %> visits</p>
            </div>
          </div>
        </div>
      </section>
    <% end %>

    <section class="complete-rankings">
      <h2>Complete Rankings</h2>
      <div class="rankings-list">
        <% @rankings.each do |ranking| %>
          <div class="ranking-item">
            <div class="rank-badge rank-<%= ranking.rank %>">
              <span class="rank-number">#<%= ranking.rank %></span>
              <% if ranking.rank == 1 %>
                <span class="rank-icon">üëë</span>
              <% elsif ranking.rank == 2 %>
                <span class="rank-icon">ü•à</span>
              <% elsif ranking.rank == 3 %>
                <span class="rank-icon">ü•â</span>
              <% else %>
                <span class="rank-icon">üèÜ</span>
              <% end %>
            </div>

            <div class="rank-image">
              <% if ranking.restaurant.image.present? %>
                <img src="<%= ranking.restaurant.image %>" alt="<%= ranking.restaurant.name %>">
              <% else %>
                <div class="placeholder-small"></div>
              <% end %>
            </div>

            <div class="rank-info">
              <h3><%= ranking.restaurant.name %></h3>
              <p class="address">üìç <%= ranking.restaurant.address %></p>
              <% if ranking.restaurant.cuisine.present? %>
                <span class="badge"><%= ranking.restaurant.cuisine %></span>
              <% end %>
            </div>

            <div class="rank-stats">
              <div class="stat-item">
                <span class="stat-icon">üìà</span>
                <strong><%= ranking.total_visits %></strong>
                <span class="stat-label">visits</span>
              </div>
              <div class="stat-item">
                <span class="stat-icon">üë•</span>
                <span class="stat-label"><%= ranking.unique_visitors %> visitors</span>
              </div>
            </div>

            <a href="<%= restaurant_path(ranking.restaurant) %>" class="btn btn-outline btn-small">View</a>
          </div>
        <% end %>
      </div>
    </section>

    <div class="cta-section">
      <h3>Help shape the rankings!</h3>
      <p>Check in to your favorite ramen spots and contribute to the community rankings.</p>
      <a href="<%= root_path %>" class="btn btn-primary">Check In Now</a>
    </div>
  <% else %>
    <div class="empty-state">
      <span class="empty-icon">üèÜ</span>
      <h2>No rankings yet!</h2>
      <p>Be the first to check in and start building the community rankings.</p>
      <a href="<%= root_path %>" class="btn btn-primary">Start Checking In</a>
    </div>
  <% end %>
</div>

<style>
  .rankings-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .rankings-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 40px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 8px;
  }

  .rankings-header h1 {
    font-size: 36px;
    margin-bottom: 10px;
  }

  .rankings-header p {
    font-size: 16px;
    opacity: 0.9;
  }

  .rankings-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .stat {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
  }

  .stat-icon {
    font-size: 32px;
    display: block;
    margin-bottom: 10px;
  }

  .stat-number {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .stat-label {
    font-size: 12px;
    color: #666;
    text-transform: uppercase;
  }

  .podium-section {
    margin-bottom: 50px;
  }

  .podium-section h2 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 24px;
  }

  .podium {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 20px;
    margin-bottom: 40px;
  }

  .podium-position {
    flex: 1;
    max-width: 300px;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .first-place {
    order: 2;
    transform: translateY(0);
  }

  .first-place .podium-image {
    border: 3px solid #ffd700;
    height: 240px;
  }

  .second-place {
    order: 1;
    transform: translateY(40px);
  }

  .second-place .podium-image {
    border: 3px solid #c0c0c0;
    height: 200px;
  }

  .third-place {
    order: 3;
    transform: translateY(80px);
  }

  .third-place .podium-image {
    border: 3px solid #cd7f32;
    height: 160px;
  }

  .podium-image {
    width: 100%;
    overflow: hidden;
  }

  .podium-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .placeholder-podium {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .podium-content {
    padding: 20px;
    text-align: center;
  }

  .podium-content .medal {
    font-size: 32px;
    display: block;
    margin-bottom: 10px;
  }

  .podium-content h3 {
    font-size: 16px;
    margin-bottom: 5px;
  }

  .podium-content .cuisine {
    color: #666;
    font-size: 12px;
    margin-bottom: 10px;
  }

  .podium-content .visits {
    font-weight: bold;
    color: #667eea;
  }

  .complete-rankings {
    margin-bottom: 40px;
  }

  .complete-rankings h2 {
    margin-bottom: 20px;
    font-size: 24px;
  }

  .rankings-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .ranking-item {
    display: flex;
    align-items: center;
    gap: 15px;
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .rank-badge {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-radius: 6px;
    font-weight: bold;
    min-width: 80px;
    justify-content: center;
  }

  .rank-badge.rank-1 {
    background: #ffd700;
    color: #333;
  }

  .rank-badge.rank-2 {
    background: #c0c0c0;
    color: #333;
  }

  .rank-badge.rank-3 {
    background: #cd7f32;
    color: white;
  }

  .rank-number {
    font-size: 14px;
  }

  .rank-icon {
    font-size: 16px;
  }

  .rank-image {
    flex-shrink: 0;
    width: 60px;
    height: 60px;
    border-radius: 6px;
    overflow: hidden;
  }

  .rank-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .placeholder-small {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .rank-info {
    flex: 1;
  }

  .rank-info h3 {
    margin: 0 0 5px 0;
  }

  .rank-info .address {
    color: #666;
    font-size: 12px;
    margin-bottom: 8px;
  }

  .badge {
    display: inline-block;
    background: #f0f0f0;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
  }

  .rank-stats {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
  }

  .stat-item strong {
    font-size: 14px;
  }

  .stat-label {
    color: #666;
  }

  .btn-small {
    font-size: 12px;
    padding: 6px 12px;
  }

  .cta-section {
    text-align: center;
    padding: 40px;
    background: linear-gradient(135deg, #f8f9fa 0%, #f0f1f5 100%);
    border-radius: 8px;
  }

  .cta-section h3 {
    font-size: 20px;
    margin-bottom: 10px;
  }

  .cta-section p {
    color: #666;
    margin-bottom: 20px;
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
  }

  .empty-icon {
    font-size: 64px;
    display: block;
    margin-bottom: 20px;
  }

  .empty-state h2 {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .empty-state p {
    color: #666;
    margin-bottom: 30px;
  }

  @media (max-width: 768px) {
    .podium {
      flex-direction: column;
      align-items: center;
    }

    .podium-position {
      width: 100%;
      max-width: 100%;
      transform: translateY(0) !important;
      order: unset !important;
    }

    .ranking-item {
      flex-wrap: wrap;
    }

    .rank-stats {
      width: 100%;
      order: 3;
    }
  }
</style>
